% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Availability_Analysis.R
\name{summarise_sra_availability}
\alias{summarise_sra_availability}
\title{Summarise SRA modality composition}
\usage{
summarise_sra_availability(
  results,
  species = NULL,
  all = FALSE,
  include_geo = FALSE
)
}
\arguments{
\item{results}{A list returned by \code{\link[=query_species]{query_species()}}.}

\item{species}{\code{NULL} (default) to include all species, or a character
vector specifying which species to include.}

\item{all}{Logical; if \code{TRUE}, include subclass-level columns.}

\item{include_geo}{Logical; if \code{TRUE}, append GEO linkage summaries.}
}
\value{
A tibble with one row per species containing class-level counts and
totals. When \code{all = TRUE}, subclass-level counts are included. When
\code{include_geo = TRUE}, GEO summary columns are appended (e.g.
\code{denom_total}, \code{geo_linked_denom}, \code{geo_prop}, and '\if{html}{\out{<class>}}_geo').
The tibble has class \code{gdt_tbl} and carries a \code{query_info} attribute.
It also carries a cached UID-level profile as attribute \code{sra_profile}
(see “Profile cache”), plus metadata in \code{sra_profile_info}.
}
\description{
Collapses experiment-level SRA metadata into species-level modality counts
using ontology-assigned classes and (optionally) subclasses.
}
\details{
By default, the output includes class-level counts for the major modality
classes (genomic, transcriptomic, epigenomic, chromatin, other, unknown),
plus the total number of SRA experiments per species.

Profile cache (used by \code{\link[=summarise_sra_skew]{summarise_sra_skew()}}):
In addition to the summary table, this function attaches a cached, UID-level
profile as an attribute \code{sra_profile}. The profile contains (at minimum)
\code{species}, \code{entrez_uid}, \code{biosample}, \code{bioproject}, \code{class}, and \code{subclass}.
This cache is intended to be re-used locally for downstream summaries that
require within-species structure (e.g. replication skew across BioProjects or
BioSamples) without re-querying NCBI. In particular, \code{\link[=summarise_sra_skew]{summarise_sra_skew()}}
consumes \code{attr(x, 'sra_profile')} from the output of this function.

GEO overlay:
When \code{include_geo = TRUE}, GEO-linked class counts are appended as
'\if{html}{\out{<class>}}_geo' columns, alongside a GEO-compatible denominator summary and
proportion. The GEO-compatible denominator is defined as:
transcriptomic + epigenomic + chromatin + other + unknown.
}
\examples{
\dontrun{
RESULTS <- query_species(c('Vigna angularis', 'Vigna vexillata'))
SRA_SUMMARY <- summarise_sra_availability(RESULTS)
print(SRA_SUMMARY)
}
}
\seealso{
\code{\link[=summarise_sra_skew]{summarise_sra_skew()}}, \code{\link[=extract_sra_metadata]{extract_sra_metadata()}},
\code{\link[=plot_sra_availability]{plot_sra_availability()}}, \code{\link[=plot_sra_geo_availability]{plot_sra_geo_availability()}}
}
